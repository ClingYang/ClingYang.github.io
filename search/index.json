[{"content":"å…³äºä¸»ä»»åŠ¡å‡½æ•° ä¹‹å‰å†™åˆ°åœ¨ä¸»å‡½æ•°é‡Œé¢å¤„ç†çš„äº‹ä»¶ä¹Ÿä¸çŸ¥é“æœ‰æ²¡æœ‰é—®é¢˜ ä¹‹æ‰€ä»¥è¿™ä¹ˆå†™æ˜¯å› ä¸ºæˆ‘è§‰å¾—å¦‚æœå…¨ç”¨cubemaxé…ç½®å¥½çš„è¯ä¸‹æ¬¡å¦‚æœæ¢ä¸»æ§å¯èƒ½ä¼šæ¯”è¾ƒéº»çƒ¦ æ‰€ä»¥ä»Šå¤©å†ç»†çœ‹ä¸€ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 void AppTaskCreate(void) { taskENTER_CRITICAL(); // è¿›å…¥ä¸´ç•ŒåŒº BaseType_t xReturn = pdPASS; /* å®šä¹‰ä¸€ä¸ªåˆ›å»ºä¿¡æ¯è¿”å›å€¼ï¼Œé»˜è®¤ä¸ºpdPASS */ uint32_t count = 0; /* åˆ›å»ºTest_Taskä»»åŠ¡ */ xReturn = xTaskCreate((TaskFunction_t)color_led_task_fun, /* ä»»åŠ¡å…¥å£å‡½æ•° */ (const char *)\u0026#34;COLOR_LED_TASK\u0026#34;, /* ä»»åŠ¡åå­— */ (uint16_t)256, /* ä»»åŠ¡æ ˆå¤§å° */ (void *)NULL, /* ä»»åŠ¡å…¥å£å‡½æ•°å‚æ•° */ (UBaseType_t)osPriorityNormal, /* ä»»åŠ¡çš„ä¼˜å…ˆçº§ */ (TaskHandle_t *)\u0026amp;COLOR_LED_Handle); /* ä»»åŠ¡æ§åˆ¶å—æŒ‡é’ˆ */ if (pdPASS != xReturn) { goto error; } UART1_Printf(\u0026#34;COLOR_LED_TASK[info]:Runing, Priority:%d\\n\u0026#34;, osPriorityNormal); /* è¿è¡Œå ç”¨ */ memset(pcWriteBuffer, 0, 400); vTaskList(pcWriteBuffer); // è·å–å†…å­˜ä¿¡æ¯ UART1_Printf(\u0026#34;\\r\\n\u0026#34;); UART1_Printf(\u0026#34;%s\\n\\r\u0026#34;, pcWriteBuffer); memset(pcWriteBuffer, 0, 400); vTaskGetRunTimeStats(pcWriteBuffer); // è·å–CPUå ç”¨ç‡ä¿¡æ¯ UART1_Printf(\u0026#34;\\r\\n\u0026#34;); UART1_Printf(\u0026#34;%s\\n\\r\u0026#34;, pcWriteBuffer); return; error: UART1_Printf(\u0026#34;App_Task_Create[error]:Task Create fail,system exception\\n\u0026#34;); while (1) { UART1_Printf(\u0026#34;error count:%d\\n\u0026#34;, (int)count++); app_main_delay_ms(1000); } taskEXIT_CRITICAL(); // é€€å‡ºä¸´ç•ŒåŒº } åˆæ·»åŠ äº†ä¸€äº›åŠŸèƒ½\nä¸²å£å°±ä¼šæ‰“å°å‡ºè¿™æ ·çš„å†…å®¹ å½“ç„¶åœ¨è¿™ä¹‹å‰è¿˜æ˜¯è¦åœ¨cubemaxé‡Œé¢æ‰“å¼€ä¸€äº›ä¸œè¥¿ å‚è€ƒé“¾æ¥ å…¨éƒ¨æ‰“å¼€å˜æˆEnable æ¯æ¬¡é…ç½®ä»»åŠ¡å°±å¯ä»¥è¿™æ ·è¿›è¡Œ ä¿®æ”¹å¦‚ä¸‹ å½“ç„¶åº”ç”¨å‡½æ•°è¿˜æ˜¯å¾—è¦ä½ è‡ªå·±å†™çš„ è¿™æ ·å¥½å¤„æˆ‘æ„Ÿè§‰å°±æ˜¯åˆ°æ—¶å€™ä½ è¦æ˜¯è¿ç§»èŠ¯ç‰‡ä¿®æ”¹çš„åº”è¯¥ä¸æ˜¯å¾ˆå¤§\n","date":"2025-03-20T14:25:54+08:00","image":"https://cdn.jsdelivr.net/gh/ClingYang/img1@latest/20250320144944405.png","permalink":"https://clingyang.github.io/p/hal_freertos%E7%9A%84%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%952/","title":"HAL_Freertosçš„ä½¿ç”¨è®°å½•2"},{"content":"ä¸ºäº†ä¿å­˜å·¥ä½œçŠ¶æ€ é•¿æŒ‰å…³æœºåæˆ–è€…30åˆ†é’Ÿåæ–­ç”µ åœ¨è¿™ä¸ªæ“ä½œå‰å…ˆä¿å­˜çŠ¶æ€ ä¸‹æ¬¡å¼€æœºæ—¶ç›´æ¥è¯»å–ä¿å­˜å†…å®¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 #include \u0026#34;Flash_baup.h\u0026#34; void SaveStateToFlash(uint8_t level, uint8_t reverse) { // è§£é” Flash HAL_FLASH_Unlock(); // æ“¦é™¤ Flash é¡µ FLASH_EraseInitTypeDef EraseInitStruct; uint32_t PageError = 0; EraseInitStruct.TypeErase = FLASH_TYPEERASE_PAGES; EraseInitStruct.PageAddress = FLASH_USER_START_ADDR; EraseInitStruct.NbPages = 1; if (HAL_FLASHEx_Erase(\u0026amp;EraseInitStruct, \u0026amp;PageError) != HAL_OK) { // é”™è¯¯å¤„ç† Error_Handler(); } // å†™å…¥å½“å‰æ¡£ä½å’Œæ­£åè½¬çŠ¶æ€ uint32_t data = (level \u0026lt;\u0026lt; 8) | reverse; if (HAL_FLASH_Program(FLASH_TYPEPROGRAM_WORD, FLASH_USER_START_ADDR, data) != HAL_OK) { // é”™è¯¯å¤„ç† Error_Handler(); } // é”å®š Flash HAL_FLASH_Lock(); } void LoadStateFromFlash(uint8_t *level, uint8_t *reverse) { uint32_t data = *(__IO uint32_t*)FLASH_USER_START_ADDR; *level = (data \u0026gt;\u0026gt; 8) \u0026amp; 0xFF; *reverse = data \u0026amp; 0xFF; } å¤´æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #ifndef FLASH_BAUP_H #define FLASH_BAUP_H #include \u0026#34;stm32f0xx_hal.h\u0026#34; #include \u0026#34;main.h\u0026#34; // å®šä¹‰ Flash å­˜å‚¨åœ°å€ #define FLASH_USER_START_ADDR ((uint32_t)0x08007000) /* Start @ of user Flash area, assuming 1KB per page and 128KB total Flash size */ // Flash æ“ä½œå‡½æ•°å£°æ˜ void SaveStateToFlash(uint8_t level, uint8_t reverse); void LoadStateFromFlash(uint8_t *level, uint8_t *reverse); #endif // FLASH_BAUP_H ä¿å­˜çš„æ˜¯ä¸¤ä¸ª uint8_t çš„æ•°æ® å€¼å¾—æ³¨æ„çš„æ˜¯æˆ‘ä»¬è¦æ³¨æ„åœ°å€ å­˜å‚¨çš„èµ·å§‹åœ°å€æœ‰è®²ç©¶çš„ æœ€åé€šè¿‡keil ä¹Ÿæ˜¯èƒ½çœ‹åˆ°çš„ å¦‚æœèµ„æºç´§å¼  å¯ä»¥debug ä¸€ä¸‹ ","date":"2025-03-20T11:46:54+08:00","image":"https://cdn.jsdelivr.net/gh/ClingYang/img1@latest/20250320145049973.png","permalink":"https://clingyang.github.io/p/hal_flash-%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD%E4%B8%8E%E8%AF%BB%E5%8F%96/","title":"HAL_flash æ•°æ®å¤‡ä»½ä¸è¯»å–"},{"content":"æœ€è¿‘å…¥äº†ä¸€ä¸ªESP32 å…„å¼Ÿä»¬ï¼Œè¿™ç©æ„è¿˜å¯ä»¥ï¼Œä¹°æ¥è‚¯å®šæ˜¯ç»™å®ƒç‚¹äº®å•Šå¯¹å§ æˆ‘å°±æ˜¯ç‚¹ç¯ä¾ ğŸ‡ ğŸ˜­åƒä¸‡ä¸è¦ä¸æ¥å¤©çº¿å•Šï¼Œä¸ç„¶ä½ ä¼šä¸€ç›´æ‰¾ä¸åˆ°ä½ çš„wifi 1.ç‚¹ç¯ç¬¬ä¸€æ­¥ä½ å¾—æœ‰IDE == Arduino å°±æ˜¯è¿™ä¸ªç»¿ä¸œè¥¿\nå¯æ˜¯æ€ä¹ˆä¸‹è½½å®‰è£…å‘¢ï¼Ÿè‡ªå·±ç™¾åº¦å§ï¼Œå½“ç„¶ä½ è¦æ˜¯æ‡’è¿™è¾¹ä¹Ÿç»™æ‚¨é™„åŠ äº†è¿æ¥\nArduino å®‰è£… \u0026mdash;è¿™é‡Œä½œè€…è®¤ä¸ºä½ çœ‹è¿æ¥å¹¶ä¸”ä½ å®‰è£…å¥½äº†\n2023/5/2 å€¼å¾—æ³¨æ„çš„æ˜¯ è¿™ä¸ªsdkä½ éœ€è¦ä»¥ç®¡ç†å‘˜çš„èº«ä»½å»è¿è¡Œ\nok ç°åœ¨è¿›å…¥ç¬¬äºŒæ­¥\n2.ç¼–å†™ç‚¹ç¯ç¨‹åº 1 2 3 4 5 6 7 8 9 10 11 12 13 const int LED = 2; void setup() { // initialize digital pin LED_BUILTIN as an output. pinMode(LED, OUTPUT); } // the loop function runs over and over again forever void loop() { digitalWrite(LED, HIGH); // turn the LED on (HIGH is the voltage level) delay(1000); // wait for a second digitalWrite(LED, LOW); // turn the LED off by making the voltage LOW delay(1000); // wait for a second } çƒ§å½• ä¸€å®šè¦é€‰ä¸²å£\nä¸Šä¼  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 é¡¹ç›®ä½¿ç”¨äº† 219045 å­—èŠ‚ï¼Œå ç”¨äº† (16%) ç¨‹åºå­˜å‚¨ç©ºé—´ã€‚æœ€å¤§ä¸º 1310720 å­—èŠ‚ã€‚ å…¨å±€å˜é‡ä½¿ç”¨äº†16088å­—èŠ‚ï¼Œ(4%)çš„åŠ¨æ€å†…å­˜ï¼Œä½™ç•™311592å­—èŠ‚å±€éƒ¨å˜é‡ã€‚æœ€å¤§ä¸º327680å­—èŠ‚ã€‚ esptool.py v3.3 Serial port COM4 Connecting...... Chip is ESP32-D0WD-V3 (revision 3) Features: WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None Crystal is 40MHz MAC: e8:31:cd:74:1c:84 Uploading stub... Running stub... Stub running... Changing baud rate to 921600 Changed. Configuring flash size... Flash will be erased from 0x00001000 to 0x00005fff... Flash will be erased from 0x00008000 to 0x00008fff... Flash will be erased from 0x0000e000 to 0x0000ffff... Flash will be erased from 0x00010000 to 0x00045fff... Flash params set to 0x022f Compressed 18880 bytes to 12992... Writing at 0x00001000... (100 %) Wrote 18880 bytes (12992 compressed) at 0x00001000 in 0.5 seconds (effective 279.9 kbit/s)... Hash of data verified. Compressed 3072 bytes to 128... Writing at 0x00008000... (100 %) Wrote 3072 bytes (128 compressed) at 0x00008000 in 0.1 seconds (effective 350.9 kbit/s)... Hash of data verified. Compressed 8192 bytes to 47... Writing at 0x0000e000... (100 %) Wrote 8192 bytes (47 compressed) at 0x0000e000 in 0.1 seconds (effective 490.3 kbit/s)... Hash of data verified. Compressed 219440 bytes to 120828... Writing at 0x00010000... (12 %) Writing at 0x0001d956... (25 %) Writing at 0x00022fd3... (37 %) Writing at 0x00028288... (50 %) Writing at 0x0002d6ef... (62 %) Writing at 0x00035f5d... (75 %) Writing at 0x0003e042... (87 %) Writing at 0x000438e3... (100 %) Wrote 219440 bytes (120828 compressed) at 0x00010000 in 2.4 seconds (effective 722.3 kbit/s)... Hash of data verified çƒ§å†™æˆåŠŸçœ‹ä½ çš„æ¿å­æ˜¯ä¸æ˜¯åœ¨blink blink âœ¨âœ¨âœ¨âœ¨ç‚¹ç¯è§†é¢‘ ","date":"2025-03-20T11:08:09+08:00","image":"https://cdn.jsdelivr.net/gh/ClingYang/img1@latest/20250320145935000.png","permalink":"https://clingyang.github.io/p/esp32-arduino-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/","title":"ESP32 ARDUINO å¼€å‘ç¯å¢ƒæ­å»º"},{"content":"æ–‡ç« é»˜è®¤æ ¼å¼æ¨¡ç‰ˆ æ¨èåœ¨æ¨¡æ¿ä¸­è®¾ç½®ï¼Œä¿®æ”¹ archetypes/default.mdï¼ˆå¦‚æœæ²¡æœ‰åˆ™æ–°å»ºä¸€ä¸ªå³å¯ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 --- date : \u0026#39;{{ .Date }}\u0026#39; draft: true title: \u0026#39;{{ replace .File.ContentBaseName \u0026#34;-\u0026#34; \u0026#34; \u0026#34; | title }}\u0026#39; image: https://picsum.photos/800/600.webp?random={{ substr (md5 (.Date)) 4 8 }} description: æè¿° summary: æ–‡ç« æ‘˜è¦ï¼Œé‡è¦ï¼å…³ä¹ESOæœç´¢å¼•æ“ä¼˜åŒ– categories: [ \u0026#34;hugo\u0026#34;, \u0026#34;ç¬”è®°\u0026#34;, ] tags: [ \u0026#34;hugo\u0026#34;, \u0026#34;ç¬”è®°\u0026#34; ] --- è¿™é‡Œçš„é‡ç‚¹æ˜¯ image è¿™ä¸€è¡Œï¼Œå³ä½¿ç”¨äº† Lorem Picsum çš„æ¥å£ï¼Œç„¶åå°±å¯ä»¥å¾—åˆ°ä¸€å¼ éšæœºçš„å›¾ç‰‡ï¼Œæ›´å¤šè¯¦æƒ…ä¹Ÿå¯å‰å¾€ Lorem Picsum äº†è§£ã€‚ ä¹‹åï¼Œæˆ‘ä»¬é€šè¿‡ hugo new å‘½ä»¤æ—¶ï¼Œæ–°å»ºçš„æ–‡ç« ä¼šéšæœºåŒ¹é…ä¸€å¼ å›¾ç‰‡\næ–‡ç« çš„ä¸€å†™å˜é‡çš„å†™æ³• è¯´æ˜tags ä¸€èˆ¬æ˜¯åœ¨æ–‡ç« å†…éƒ¨çš„æ ‡é¢˜ æˆ‘è¿˜è¦ä¿®æ”¹å›¾ç‰‡ç²˜è´´è·¯å¾„ åœ¨vscode è®¾ç½®é‡Œé¢ è¯„è®ºåŒºæˆ‘æˆäº† å‚è€ƒé“¾æ¥ æ•ˆæœå¯ä»¥çœ‹æˆ‘è¯„è®ºåŒº\n1 2 3 4 #åˆ›å»ºæ–°çš„ç¬”è®°æ˜¯ .\\hugo new content post/Blogname/index.md # æœ¬åœ°è°ƒè¯•å¯åŠ¨æœåŠ¡ .\\hugo server -D æ–‡ç« å›¾ç‰‡ æ“ä½œ ã€Hugoã€‘markdownä¸­å›¾ç‰‡å¤§å°å’Œå¯¹é½æ–¹å¼è°ƒæ•´\nè„šæœ¬è‡ªåŠ¨åŒ– åœ¨vscode æˆ‘å»ºç«‹äº†ä¸€ä¸ªå·¥ä½œåŒº å†™äº†ä¸€äº›ä¸ªè„šæœ¬ æ–°å»ºæ–‡ç«  åˆ é™¤æ–‡ç«  æœ¬åœ°é¢„è§ˆ æ›´æ–°è¿œç¨‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 { \u0026#34;folders\u0026#34;: [ { \u0026#34;path\u0026#34;: \u0026#34;..\u0026#34; } ], \u0026#34;settings\u0026#34;: { \u0026#34;VsCodeTaskButtons.tasks\u0026#34;: [ { \u0026#34;label\u0026#34;: \u0026#34;$(zap)New\u0026#34;, \u0026#34;task\u0026#34;: \u0026#34;New\u0026#34;, \u0026#34;tooltip\u0026#34;: \u0026#34;åˆ›å»ºä¸€ä¸ªæ–°æ–‡ç« \u0026#34; }, { \u0026#34;label\u0026#34;: \u0026#34;$(notebook-delete-cell) Clean\u0026#34;, \u0026#34;task\u0026#34;: \u0026#34;clean\u0026#34;, \u0026#34;tooltip\u0026#34;: \u0026#34;åˆ é™¤æŒ‡å®šæ–‡ç« \u0026#34; }, { \u0026#34;label\u0026#34;: \u0026#34;$(globe)localview\u0026#34;, \u0026#34;task\u0026#34;: \u0026#34;localview\u0026#34;, \u0026#34;tooltip\u0026#34;: \u0026#34;æœ¬åœ°é¢„è§ˆ\u0026#34; }, ] }, \u0026#34;tasks\u0026#34;: { \u0026#34;version\u0026#34;: \u0026#34;2.0.0\u0026#34;, \u0026#34;tasks\u0026#34;: [ { \u0026#34;label\u0026#34;: \u0026#34;New\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;./hugo.exe new content post/${input:Blogname}/index.md\u0026#34;, }, { \u0026#34;label\u0026#34;: \u0026#34;clean\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;Remove-Item -Recurse -Force -Path ${workspaceFolder}\\\\content\\\\post\\\\${input:cleanBlogname}\u0026#34;, }, { \u0026#34;label\u0026#34;: \u0026#34;localview\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;shell\u0026#34;, \u0026#34;command\u0026#34;: \u0026#34;./hugo.exe server -D\u0026#34;, }, ], \u0026#34;inputs\u0026#34;: [ { \u0026#34;id\u0026#34;: \u0026#34;Blogname\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;promptString\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;è¾“å…¥æ–‡ç« åå­—\u0026#34;, \u0026#34;default\u0026#34;: \u0026#34;Blogname\u0026#34; }, { \u0026#34;id\u0026#34;: \u0026#34;cleanBlogname\u0026#34;, \u0026#34;type\u0026#34;: \u0026#34;promptString\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;è¾“å…¥éœ€è¦åˆ é™¤æ–‡ç« åå­—\u0026#34;, \u0026#34;default\u0026#34;: \u0026#34;cleanBlogname\u0026#34; }, ] } } åœ¨ VSCode çš„ tasks.json æ–‡ä»¶ä¸­ï¼Œ$(zap) æ˜¯ä¸€ä¸ªå›¾æ ‡åç§°ï¼Œç”¨äºåœ¨ä»»åŠ¡åˆ—è¡¨ä¸­æ˜¾ç¤ºä¸€ä¸ªå›¾æ ‡ã€‚è¿™äº›å›¾æ ‡åç§°æ˜¯ VSCode çš„å†…ç½®å›¾æ ‡ï¼Œç”¨äºåœ¨ç”¨æˆ·ç•Œé¢ä¸­æä¾›è§†è§‰æç¤ºã€‚\nVSCode çš„å›¾æ ‡åç§°æ˜¯åŸºäº Octicons å›¾æ ‡é›†çš„ã€‚Octicons æ˜¯ GitHub çš„å®˜æ–¹å›¾æ ‡é›†ï¼Œå¹¿æ³›ç”¨äº VSCode çš„ç•Œé¢ä¸­ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å›¾æ ‡åç§°ç¤ºä¾‹ï¼š\n$(zap) - é—ªç”µå›¾æ ‡ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºå¿«é€Ÿæˆ–å¼ºå¤§çš„æ“ä½œ. $(gear) - é½¿è½®å›¾æ ‡ï¼Œé€šå¸¸ç”¨äºè®¾ç½®æˆ–é…ç½®ç›¸å…³çš„æ“ä½œ. $(file) - æ–‡ä»¶å›¾æ ‡ï¼Œç”¨äºè¡¨ç¤ºæ–‡ä»¶ç›¸å…³çš„æ“ä½œ. $(trash) - åƒåœ¾æ¡¶å›¾æ ‡ï¼Œç”¨äºè¡¨ç¤ºåˆ é™¤æˆ–æ¸…ç†ç›¸å…³çš„æ“ä½œ. ä½ å¯ä»¥åœ¨ VSCode çš„ä»»åŠ¡é…ç½®ä¸­ä½¿ç”¨è¿™äº›å›¾æ ‡åç§°æ¥ä¸ºä»»åŠ¡æ·»åŠ è§†è§‰æ•ˆæœï¼Œä½¿ä»»åŠ¡åˆ—è¡¨æ›´åŠ ç›´è§‚å’Œæ˜“äºç†è§£.\nå¦‚æœä½ éœ€è¦æŸ¥æ‰¾æ›´å¤šçš„å›¾æ ‡åç§°ï¼Œå¯ä»¥å‚è€ƒ Octicons çš„å®˜æ–¹æ–‡æ¡£ï¼Œå…¶ä¸­åˆ—å‡ºäº†æ‰€æœ‰å¯ç”¨çš„å›¾æ ‡åŠå…¶åç§°.\nå¤–é“¾å›¾ç‰‡å›¾åºŠ ä¸ææ„Ÿè§‰ä¼šç‚¸\nå‚è€ƒé“¾æ¥1\nå‚è€ƒé“¾æ¥2 å‚è€ƒè¿æ¥3\n1 2 3 4 å¦‚æœåŠ é€Ÿæºæ— æ³•ä½¿ç”¨å¯ä»¥æ›´æ”¹åŠ é€Ÿæºï¼Œå°†githubçš„è®¾å®šè‡ªå®šä¹‰åŸŸåå¤„çš„cdn.jsdmirror.comæ”¹ä¸ºå…¶ä»–åŠ é€Ÿæº jsd.onmicrosoft.cn gcore.jsdelivr.net testingcf.jsdelivr.net ä¸‹é¢è¿™å¼ å›¾æ˜¯å›¾åºŠä¸Šçš„ è¿˜æœ‰ä¸€äº›é“¾æ¥å»ºç«‹ç½‘ç«™æ—¶å€™ç”¨çš„ https://www.hughh.top/posts/hugo-guide/\n","date":"2025-02-18T11:13:00+08:00","image":"https://cdn.jsdelivr.net/gh/ClingYang/img1@latest/20250320145323127.png","permalink":"https://clingyang.github.io/p/hugo%E6%A0%BC%E5%BC%8F%E8%AF%B4%E6%98%8E%E8%AE%B0%E8%BD%BD%E7%AC%94%E8%AE%B0/","title":"hugoæ ¼å¼è¯´æ˜è®°è½½ç¬”è®°"},{"content":"ç¯å¢ƒæ­å»º ç¯å¢ƒæ­å»ºåç¬¬ä¸€æ®µä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 #include \u0026lt;stdio.h\u0026gt; #include \u0026#34;freertos/FreeRTOS.h\u0026#34; #include \u0026#34;freertos/task.h\u0026#34; #include \u0026#34;esp_log.h\u0026#34; void taskA(void *pvParameter) { while (1) { ESP_LOGI(\u0026#34;main\u0026#34;, \u0026#34;Task 1\u0026#34;); vTaskDelay(pdMS_TO_TICKS(500)); } } void app_main(void) { // tskNO_AFFINITY åŒæ ¸éƒ½å¯ä»¥è¿è¡Œ xTaskCreatePinnedToCore(taskA, \u0026#34;taskA\u0026#34;, 2048, NULL, 3, NULL, tskNO_AFFINITY); } main æ˜¯ç‰¹æ®Šçš„ç»„ä»¶\nä»»åŠ¡åŒæ­¥ é˜Ÿåˆ— 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 #include \u0026lt;stdio.h\u0026gt; #include \u0026#34;freertos/FreeRTOS.h\u0026#34; #include \u0026#34;freertos/task.h\u0026#34; #include \u0026#34;freertos/queue.h\u0026#34; #include \u0026#34;esp_log.h\u0026#34; QueueHandle_t Queue_handle = NULL; typedef struct { int a; int b; } QueueMessage_t; void taksA(void *pvParameter) { QueueMessage_t message; message.a = 1; message.b = 2; while (1) { if (xQueueSend(Queue_handle, \u0026amp;message, 0) == pdTRUE) { ESP_LOGI(\u0026#34;main\u0026#34;, \u0026#34;Send success\u0026#34;); } else { ESP_LOGE(\u0026#34;main\u0026#34;, \u0026#34;Send failed\u0026#34;); } message.a++; message.b++; vTaskDelay(pdMS_TO_TICKS(500)); } } void taksB(void *pvParameter) { QueueMessage_t message; while (1) { if (pdTRUE == xQueueReceive(Queue_handle, \u0026amp;message, 0)) { ESP_LOGI(\u0026#34;main\u0026#34;, \u0026#34;Receive success\u0026#34;); ESP_LOGI(\u0026#34;main\u0026#34;, \u0026#34;a=%d, b=%d\u0026#34;, message.a, message.b); } else { ESP_LOGE(\u0026#34;main\u0026#34;, \u0026#34;Receive failed\u0026#34;); } vTaskDelay(pdMS_TO_TICKS(500)); } } void app_main(void) { Queue_handle = xQueueCreate(10, sizeof(QueueMessage_t)); if (NULL == Queue_handle ) { ESP_LOGE(\u0026#34;main\u0026#34;, \u0026#34;Queue create failed\u0026#34;); } else { ESP_LOGI(\u0026#34;main\u0026#34;, \u0026#34;Queue create success\u0026#34;); } xTaskCreatePinnedToCore(taksA, \u0026#34;taksA\u0026#34;, 2048, NULL, 3, NULL, tskNO_AFFINITY); xTaskCreatePinnedToCore(taksB, \u0026#34;taksB\u0026#34;, 2048, NULL, 3, NULL, tskNO_AFFINITY); } ä¿¡å·é‡ ä»»åŠ¡ä¿æŠ¤ç¡¬ä»¶æœºåˆ¶ äº‹ä»¶ç»„ ç›´è¾¾ä»»åŠ¡é€šçŸ¥ åŸç”ŸåŒºåˆ« GPIO æ“ä½œ ç¯å¢ƒæ­å»º ä¹é‘«å®˜æ–¹æ–‡ç«  text text ","date":"2025-01-08T23:58:10+08:00","image":"https://cdn.jsdelivr.net/gh/ClingYang/img1@latest/20250320145836481.png","permalink":"https://clingyang.github.io/p/esp_note/","title":"ESP_Note"},{"content":" ä¸»è¦åˆ©ç”¨çš„æ˜¯vscodeé‡Œé¢stm32forvscodeçš„æ’ä»¶ ç¬¬ä¸€æ­¥å°±æ˜¯åˆ›å»ºcubmaxçš„å·¥ç¨‹ RCC è°ƒè¯•æ–¹å¼ å’Œ æ—¶åŸº è¿™é‡ŒDebug ä¸æ•´å¥½ è¿™ä¸ªæ¿å­å°±ä¼šå˜ç – è¦ç”¨çº¿åˆ·äº†\né€‰æ‹©FREERTOS\né€‰æ‹©æœ€å¤§é¢‘ç‡ .c å’Œ .h æ–‡ä»¶åˆ†å¼€ç”Ÿæˆ ç”Ÿæˆï¼ï¼(åŸç¥å¯åŠ¨) å…³äºè¿™ä¸ªæ¡†æ¶çš„å»ºç«‹ æˆ‘é€‰æ‹©å¦‚ä¸‹è¿™æ · åº”ç”¨å’Œé©±åŠ¨ï¼š\nä½ æ–°å»ºäº†ä¸¤ä¸ªæ–‡ä»¶å¤¹æ‰€ä»¥éœ€è¦å†makefileæ–‡ä»¶æ·»åŠ è¿›æ¥\nè¿™ä¸ªæ’ä»¶å¯ä»¥å¸®ä½ æ·»åŠ ä½†æ˜¯éœ€è¦ä½ è®¾ç½®ä¸€ä¸‹\nDrivers å±‚é¢ .c æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #include \u0026#34;led_driver.h\u0026#34; /// @brief å…¨å½©ç¯åˆå§‹åŒ– /// @param void led_init(void) { HAL_GPIO_WritePin(RGB_PORT_R, RGB_PIN_R, GPIO_PIN_SET); HAL_GPIO_WritePin(RGB_PORT_G, RGB_PIN_G, GPIO_PIN_SET); HAL_GPIO_WritePin(RGB_PORT_B, RGB_PIN_B, GPIO_PIN_SET); } /// @brief è®¾ç½®ç¯çš„é¢œè‰² /// @param red /// @param green /// @param blue void color_led_set(uint8_t red, uint8_t green, uint8_t blue) { //çº¢ç¯ï¼š HAL_GPIO_WritePin(RGB_PORT_R, RGB_PIN_R, (GPIO_PinState)!red); //ç»¿ç¯ï¼š HAL_GPIO_WritePin(RGB_PORT_G, RGB_PIN_G, (GPIO_PinState)!green); //è“ç¯ï¼š HAL_GPIO_WritePin(RGB_PORT_B, RGB_PIN_B, (GPIO_PinState)!blue); } .hæ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #ifndef __LED_DRIVER_H__ #define __LED_DRIVER_H__ #include \u0026#34;main.h\u0026#34; #ifdef __cplusplus extern \u0026#34;C\u0026#34; { #endif #define RGB_PORT_R GPIOB #define RGB_PORT_G GPIOB #define RGB_PORT_B GPIOB #define RGB_PIN_R GPIO_PIN_5 #define RGB_PIN_G GPIO_PIN_0 #define RGB_PIN_B GPIO_PIN_1 void color_led_set(uint8_t red, uint8_t green, uint8_t blue); void led_init(void); #ifdef __cplusplus } #endif #endif /* __LED_DRIVER_H__ */ appåº”ç”¨å±‚é¢ .h æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 #ifndef MAIN_INCLUDE_APPLICATION_H_ #define MAIN_INCLUDE_APPLICATION_H_ #ifdef __cplusplus extern \u0026#34;C\u0026#34; { #endif /*Driver Include*/ #include \u0026#34;led_driver.h\u0026#34; #include \u0026#34;beep_driver.h\u0026#34; #include \u0026#34;my_printf.h\u0026#34; /*User lib Include*/ /*pnblic Include*/ #include \u0026#34;FreeRTOS.h\u0026#34; #include \u0026#34;task.h\u0026#34; #include \u0026#34;main.h\u0026#34; #include \u0026#34;cmsis_os.h\u0026#34; #include \u0026lt;stdio.h\u0026gt; // sprintf #include \u0026lt;stdbool.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;string.h\u0026gt; /********************************************************API********************************************************/ void AppTaskCreate(void); /*LED app*/ void color_led_task_fun(void *argument); /* æµ‹è¯•ä»»åŠ¡ */ void test_task_fun(void *arg); #ifdef __cplusplus } #endif #endif /* MAIN_INCLUDE_APPLICATION_H_ */ .c åˆ›å»ºä»»åŠ¡å‡½æ•°æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 #include \u0026#34;Application.h\u0026#34; /**************************** ä»»åŠ¡å¥æŸ„ ********************************/ /* * ä»»åŠ¡å¥æŸ„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘ä¸€ä¸ªä»»åŠ¡ï¼Œå½“ä»»åŠ¡åˆ›å»ºå¥½ä¹‹åï¼Œå®ƒå°±å…·æœ‰äº†ä¸€ä¸ªä»»åŠ¡å¥æŸ„ * ä»¥åæˆ‘ä»¬è¦æƒ³æ“ä½œè¿™ä¸ªä»»åŠ¡éƒ½éœ€è¦é€šè¿‡è¿™ä¸ªä»»åŠ¡å¥æŸ„ï¼Œå¦‚æœæ˜¯è‡ªèº«çš„ä»»åŠ¡æ“ä½œè‡ªå·±ï¼Œé‚£ä¹ˆ * è¿™ä¸ªå¥æŸ„å¯ä»¥ä¸ºNULLã€‚ */ static TaskHandle_t COLOR_LED_Handle = NULL; /* LEDä»»åŠ¡å¥æŸ„ */ static TaskHandle_t TEST_TASK_Handle = NULL; /* ä»»åŠ¡å¥æŸ„ */ /********************************** å†…æ ¸å¯¹è±¡å¥æŸ„ *********************************/ /* * ä¿¡å·é‡ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œäº‹ä»¶æ ‡å¿—ç»„ï¼Œè½¯ä»¶å®šæ—¶å™¨è¿™äº›éƒ½å±äºå†…æ ¸çš„å¯¹è±¡ï¼Œè¦æƒ³ä½¿ç”¨è¿™äº›å†…æ ¸ * å¯¹è±¡ï¼Œå¿…é¡»å…ˆåˆ›å»ºï¼Œåˆ›å»ºæˆåŠŸä¹‹åä¼šè¿”å›ä¸€ä¸ªç›¸åº”çš„å¥æŸ„ã€‚å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œåç»­æˆ‘ * ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ªå¥æŸ„æ“ä½œè¿™äº›å†…æ ¸å¯¹è±¡ã€‚ * * å†…æ ¸å¯¹è±¡è¯´ç™½äº†å°±æ˜¯ä¸€ç§å…¨å±€çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡è¿™äº›æ•°æ®ç»“æ„æˆ‘ä»¬å¯ä»¥å®ç°ä»»åŠ¡é—´çš„é€šä¿¡ï¼Œ * ä»»åŠ¡é—´çš„äº‹ä»¶åŒæ­¥ç­‰å„ç§åŠŸèƒ½ã€‚è‡³äºè¿™äº›åŠŸèƒ½çš„å®ç°æˆ‘ä»¬æ˜¯é€šè¿‡è°ƒç”¨è¿™äº›å†…æ ¸å¯¹è±¡çš„å‡½æ•° * æ¥å®Œæˆçš„ * */ /******************************* å…¨å±€å˜é‡å£°æ˜ ************************************/ /* * å½“æˆ‘ä»¬åœ¨å†™åº”ç”¨ç¨‹åºçš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦ç”¨åˆ°ä¸€äº›å…¨å±€å˜é‡ã€‚ */ /* ************************************************************************* * å‡½æ•°å£°æ˜ ************************************************************************* */ void app_main_delay_ms(uint16_t ms); /* ************************************************************************* ************************************************************************* */ /// @brief åˆ›å»ºä»»åŠ¡ /// @param void AppTaskCreate(void) { taskENTER_CRITICAL(); // è¿›å…¥ä¸´ç•ŒåŒº BaseType_t xReturn = pdPASS; /* å®šä¹‰ä¸€ä¸ªåˆ›å»ºä¿¡æ¯è¿”å›å€¼ï¼Œé»˜è®¤ä¸ºpdPASS */ uint32_t count = 0; /* åˆ›å»ºTest_Taskä»»åŠ¡ */ xReturn = xTaskCreate((TaskFunction_t)color_led_task_fun, /* ä»»åŠ¡å…¥å£å‡½æ•° */ (const char *)\u0026#34;COLOR_LED_TASK\u0026#34;, /* ä»»åŠ¡åå­— */ (uint16_t)256, /* ä»»åŠ¡æ ˆå¤§å° */ (void *)NULL, /* ä»»åŠ¡å…¥å£å‡½æ•°å‚æ•° */ (UBaseType_t)osPriorityNormal, /* ä»»åŠ¡çš„ä¼˜å…ˆçº§ */ (TaskHandle_t *)\u0026amp;COLOR_LED_Handle); /* ä»»åŠ¡æ§åˆ¶å—æŒ‡é’ˆ */ if (pdPASS != xReturn) { goto error; } UART1_Printf(\u0026#34;COLOR_LED_TASK[info]:Runing, Priority:%d\\n\u0026#34;, osPriorityNormal); xReturn = xTaskCreate((TaskFunction_t)test_task_fun, /* ä»»åŠ¡å…¥å£å‡½æ•° */ (const char *)\u0026#34;TEST_TASK\u0026#34;, /* ä»»åŠ¡åå­— */ (uint16_t)256, /* ä»»åŠ¡æ ˆå¤§å° */ (void *)NULL, /* ä»»åŠ¡å…¥å£å‡½æ•°å‚æ•° */ (UBaseType_t)osPriorityNormal, /* ä»»åŠ¡çš„ä¼˜å…ˆçº§ */ (TaskHandle_t *)\u0026amp;TEST_TASK_Handle); /* ä»»åŠ¡æ§åˆ¶å—æŒ‡é’ˆ */ if (pdPASS != xReturn) { goto error; } UART1_Printf(\u0026#34;TEST_TASK[info]:Runing, Priority:%d\\n\u0026#34;, osPriorityNormal); return; error: UART1_Printf(\u0026#34;App_Task_Create[error]:Task Create fail,system exception\\n\u0026#34;); while (1) { UART1_Printf(\u0026#34;error count:%d\\n\u0026#34;, (int)count++); app_main_delay_ms(1000); } taskEXIT_CRITICAL(); // é€€å‡ºä¸´ç•ŒåŒº } void app_main_delay_ms(uint16_t ms) { vTaskDelay(pdMS_TO_TICKS(ms)); } .c ä»»åŠ¡åˆ†ç¦»æ–‡ä»¶\nå…³äºå¦‚ä½•åº”ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include \u0026#34;Application.h\u0026#34; /// @brief color_led_task_fun RGB ç¯çš„åº”ç”¨ /// @param arg void color_led_task_fun(void *arg) { while (true) { /* color_ledçš„åº”ç”¨ */ //çº¢ç¯äº®ï¼š color_led_set(1, 0, 0); os_Delay(1000); //ç»¿ç¯äº®ï¼š color_led_set(0, 1, 0); os_Delay(1000); //è“ç¯äº®ï¼š color_led_set(0, 0, 1); os_Delay(1000); //é»„ç¯äº®ï¼š color_led_set(1, 1, 0); os_Delay(1000); //ç´«ç¯äº®ï¼š color_led_set(1, 0, 1); os_Delay(1000); //ç²‰ç¯äº® color_led_set(0, 1, 1); os_Delay(1000); } } å…³äºå¦‚ä½•åµŒå…¥æ¡†æ¶ ä½ åªéœ€è¦ä»¥ä¸‹ä¸¤æ­¥å°±è¡Œ ç¬¬äºŒæ­¥ ","date":"2024-11-20T14:25:54+08:00","image":"https://cdn.jsdelivr.net/gh/ClingYang/img1@latest/20250320151456223.png","permalink":"https://clingyang.github.io/p/hal_freertos%E7%9A%84%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%951/","title":"HAL_Freertosçš„ä½¿ç”¨è®°å½•1"},{"content":"å¾€æœŸå†…å®¹å¯¼èˆª ç¬¬ä¸€æ­¥å‡†å¤‡ç¯å¢ƒ STM32CubeMX VSCODE MinGW OpenOcd arm-none-eabi-gcc ç„¶åæŠŠä¸Šé¢ä¸‹è½½çš„è½¯ä»¶ 3 4 5 bin æ–‡ä»¶ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿå˜é‡\nvscode æ’ä»¶æ’ä»¶é…ç½® 1. ä¸‹è½½è¿™ä¸ªæ’ä»¶ stm32-for-vscode é…ç½®3 4 5 çš„ æ–‡ä»¶åœ°å€\næ–°å»ºä¸€ä¸ªcubemxçš„å·¥ç¨‹ åŒå‡»åæ¥åˆ°è¿™é‡Œ é…ç½®å¼•è„š PC13 putout è®¾ç½®ç”Ÿæˆé€‰é¡¹ ç‚¹ç¯ å†™å…¥åè½¬ åœ¨ /* USER CODE BEGIN 3 */å’Œ /* USER CODE END 3 */ ä¹‹é—´ å¦‚å›¾æ‰€ç¤ºï¼š\nbuild å’Œ flsah build flash ","date":"2024-11-20T14:25:54+08:00","image":"https://cdn.jsdelivr.net/gh/ClingYang/img1@latest/20250320175246956.png","permalink":"https://clingyang.github.io/p/stm32cubemx-vscode-gcc-makefile-%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/","title":"stm32cubemx+VSCODE+GCC+makefile å¼€å‘ç¯å¢ƒæ­å»º"}]